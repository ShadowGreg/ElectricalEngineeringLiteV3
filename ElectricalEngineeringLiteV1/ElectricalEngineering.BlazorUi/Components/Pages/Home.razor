@page "/"
@using ElectricalEngineering.BlazorUi.Controllers
@using ElectricalEngineering.Domain.Feeder
@using MudBlazor

@inject BaseConsumerService BaseConsumerService

<PageTitle>Home</PageTitle>

@{
    System.Diagnostics.Debug.Assert(_consumers != null, nameof(_consumers) + " != null");
}
<MudDataGrid Items="@_consumers.Take(4)">
    <Columns>
        <PropertyColumn Property="x => x.MechanismName" Title="Наименование механизма" />
        <PropertyColumn Property="x => x.RatedElectricPower" Title="Мощность, кВт"/>
        <PropertyColumn Property="x => x.Name" Title="Технологическое наименование" />
        <PropertyColumn Property="x => x.Voltage" Title="Рабочее напряжение, В"/>
    </Columns>
</MudDataGrid>


@code {
    private List<BaseConsumer>? _consumers;

    protected override async Task OnInitializedAsync()
    {
        // await base.OnInitializedAsync();
        // await DbContext.Database.EnsureCreatedAsync();
        // _consumers = await DbContext.Consumers.ToListAsync();
        _consumers = (List<BaseConsumer>?)await BaseConsumerService.GetAllConsumersAsync();
    }

}